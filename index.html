<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vonderbos-Kempen</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="hamburger-menu" onclick="toggleMenu()">â˜°</div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="agenda.html">Agenda</a></li>
                <li><a href="gallery.html">Galerij</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="login.html">Login</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section>
            <h2>Over ons</h2>
            <p>Ontdek het rustgevende vakantiehuisje midden in het bos van de Kempen.</p>
            <img src="file:///home/chronos/u-256d155fb3963cf0cf8c58e169ed3c9c2e94e778/MyFiles/938bd924-d31c-46ae-8981-94789cd7130a.webp" alt="Vonderbos-Kempen">
        </section>
        <section id="blog-posts">
            <h2>Blog Posts</h2>
            <!-- Blog posts worden hier dynamisch toegevoegd -->
        </section>
        <section id="booking-form-section">
            <h2>Boek je verblijf</h2>
            <form id="booking-form">
                <input type="text" id="name" placeholder="Naam" required>
                <input type="email" id="email" placeholder="E-mail" required>
                <label for="start-date">Startdatum:</label>
                <input type="date" id="start-date" name="start-date" required>
                <label for="end-date">Einddatum:</label>
                <input type="date" id="end-date" name="end-date" required>
                <button type="submit">Boek nu</button>
            </form>
            <div id="booking-result"></div>
        </section>
        <div id="calendar-container">
            <button id="prev-month">Vorige maand</button>
            <div id="calendar" class="calendar"></div>
            <button id="next-month">Volgende maand</button>
        </div>
    </main>
    <script>
        function toggleMenu() {
            document.body.classList.toggle('menu-open');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const blogPosts = [
                { id: 1, title: "Welkom bij Vonderbos-Kempen", content: "Ontdek ons prachtige vakantiehuisje." },
                { id: 2, title: "Activiteiten in de omgeving", content: "Er is veel te doen in de omgeving van de Kempen." },
                { id: 3, title: "Geniet van de natuur", content: "Onze ligging in de Kempen biedt veel natuurpracht." },
                { id: 4, title: "Accommodatie", content: "Bekijk onze comfortabele accommodaties." }
            ];

            const blogPostsDiv = document.getElementById('blog-posts');

            blogPosts.forEach(post => {
                const postDiv = document.createElement('div');
                postDiv.innerHTML = `
                    <h3>${post.title}</h3>
                    <p>${post.content}</p>
                    ${isAdmin() ? `<button onclick="editPost(${post.id})">Bewerken</button>` : ""}
                `;
                blogPostsDiv.appendChild(postDiv);
            });

            if (isAdmin()) {
                document.getElementById('edit-section').style.display = 'block';
            }

            document.getElementById('edit-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const postId = document.getElementById('post-id').value;
                const title = document.getElementById('title').value;
                const content = document.getElementById('content').value;
                alert(`Post ${postId} bijgewerkt: ${title}`);
            });
        });

        function editPost(id) {
            const post = blogPosts.find(post => post.id === id);
            document.getElementById('post-id').value = post.id;
            document.getElementById('title').value = post.title;
            document.getElementById('content').value = post.content;
        }

        document.getElementById('booking-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;

            document.getElementById('booking-result').innerHTML = `
                <p>Bedankt, ${name}! Je boeking van ${startDate} tot ${endDate} is ontvangen. Een bevestigingsmail is verstuurd naar ${email}.</p>
            `;

            let currentDate = new Date(startDate);
            const end = new Date(endDate);

            while (currentDate <= end) {
                const formattedDate = currentDate.toISOString().split('T')[0];
                bookings[formattedDate] = 'booked';
                currentDate.setDate(currentDate.getDate() + 1);
            }

            updateCalendar();
        });

        const bookings = {
            '2024-11-20': 'booked',
            '2024-11-21': 'reserved'
        };

        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        function generateCalendar(month, year) {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            const firstDay = new Date(year, month).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                calendar.appendChild(emptyDiv);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day).toISOString().split('T')[0];
                const div = document.createElement('div');
                div.id = date;
                div.textContent = day;
                div.className = bookings[date] || 'available';
                calendar.appendChild(div);
            }
        }

        function updateCalendar() {
            generateCalendar(currentMonth, currentYear);

            for (const date in bookings) {
                const div = document.getElementById(date);
                if (div) {
                    div.className = bookings[date];
                }
            }
        }

        document.getElementById('prev-month').addEventListener('click', function() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            updateCalendar();
        });

        document.getElementById('next-month').addEventListener('click', function() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            updateCalendar();
        });

        function login(username, password) {
            const users = {
                "admin": { password: "admin123", role: "admin" },
                "user": { password: "user123", role: "user" }
            };

            if (users[username] && users[username].password === password) {
                sessionStorage.setItem("user", JSON.stringify({ username: username, role: users[username].role }));
                return true;
            }
            return false;
        }

        function getUser() {
            return JSON.parse(sessionStorage.getItem("user"));
        }

        function isLoggedIn() {
            return getUser() !== null;
        }

        function isAdmin() {
            const user = getUser();
            return user && user.role === "admin";
        }

        updateCalendar();
    </script>
</body>
</html>
